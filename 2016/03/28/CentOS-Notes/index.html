<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="My personal website"><title>CentOS Notes | Ronghao's Blog</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/very-simple.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="/." class="title">Ronghao's Blog</a><span class="subtitle">Share my ideas &amp; my growth</span><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><nav id="nav"><div class="container"><a href="/" class="sidebar-nav-item active">Home</a><a href="/archives" class="sidebar-nav-item">Archives</a></div></nav><div id="header-margin-bar"></div><!-- gallery that comes before the header--><div class="wrapper"><div class="container post-header"><h1>CentOS Notes</h1></div></div><div class="wrapper"><div class="container meta"><div class="post-time">2016-03-28</div><div class="post-tags"><a class="post-tag-link" href="/tags/CentOS/">CentOS</a></div></div></div><article><div class="container post"><h3 id="1-Some-Handy-Commands"><a href="#1-Some-Handy-Commands" class="headerlink" title="1. Some Handy Commands"></a>1. Some Handy Commands</h3><ul>
<li>Shut down right now: <code>shutdown -h now</code></li>
<li>Retart right now: <code>shutdown -r now</code> or <code>reboot</code></li>
<li>If you are common user, <code>su-</code> switch to administrator</li>
<li>If you are administrator, <code>su- username</code> switch to certain user</li>
<li><code>cd</code> switch to certain directory</li>
<li><code>pwd</code> show which directory you locate</li>
<li><code>useradd username</code> add a user</li>
<li><code>groupadd</code> add a group</li>
<li><code>groupdel</code> delete a group</li>
<li><code>useradd -g GroupName UserName</code> add a user to a group</li>
<li><code>chmod 764 haha</code> (root only) modify the authrity of haha to 764 which means the file creator has the full rwx rights. 6 means haha and his groupmates own the rights of rw-, meanwhile, 4 refers other groups own the right of r–.</li>
<li><code>chown username fileB</code> (root only) change the creator of fileB to certain user</li>
<li><code>chgrp groupName fileB</code> (root only) change the group of fileB</li>
<li><code>passwd username</code> modify one’s key</li>
<li><code>userdel username</code> delete a user whose files will be remained</li>
<li><code>userdel -r username</code> delete a user whose files will be delete simultainously</li>
<li><code>ls</code> list files in the directory you locate</li>
<li><code>ls -l</code> list files and their details in a long list</li>
<li><code>ls -a</code> list files including some hiden files</li>
<li><code>mkdir</code> create new directory</li>
<li><code>rmdir</code> delete <strong>blank</strong> directory</li>
<li><code>touch</code> create new file</li>
<li><code>cp DirA DirB</code> copy the file from A to B</li>
<li><code>cp -r DirA DirB</code> copy the dirctory and its subdirctories to B</li>
<li><code>mv DirA DirB</code> move or change the name of some file</li>
<li><code>rm -rf DirA</code> delete the dirctory and its subdirctories</li>
<li><code>ln -s DirA DirB</code> create a quick link for DirA</li>
<li><code>more</code> seperate contents of a file into many pages if possible to display</li>
<li><code>CommandA | CommandB</code> B will handle the result of A</li>
<li><code>greq A B</code> find if B includes A</li>
<li><code>greq A FileB</code> find the number of rows in B that includes A and their contents</li>
<li><code>greq DirB fileA</code> search fileA in all the subdirectories of A</li>
<li><code>SomeContent&gt;fileA</code> rewrite A to SomeContent</li>
<li><code>SomeContent&gt;&gt;fileA</code> add SomeContent at the end of fileA</li>
<li><code>cat fileA</code> only read the contents of A</li>
<li><code>vim fileA</code> read and edit the contents of A</li>
</ul>
<h3 id="2-The-Command-of-Mannal"><a href="#2-The-Command-of-Mannal" class="headerlink" title="2. The Command of Mannal"></a>2. The Command of Mannal</h3><h3 id="1-FTP-Server-Configuration"><a href="#1-FTP-Server-Configuration" class="headerlink" title="1. FTP Server Configuration"></a>1. FTP Server Configuration</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ rpm -qa | grep vsftpd</span><br><span class="line">$ yum install vsftpd</span><br><span class="line">$ vim /etc/vsftpd/vsftpd.conf</span><br><span class="line">$ anonymous_<span class="built_in">enable</span>=NO</span><br><span class="line">$ listen=YES</span><br><span class="line">$ listen_ipv6=NO</span><br><span class="line">$ vim /etc/vsftpd/ftpusers</span><br></pre></td></tr></table></figure>
<p>delete <code>root</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/vsftpd/user_list</span><br></pre></td></tr></table></figure>
<p>delete <code>root</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ service vsftpd start</span><br><span class="line">$ netstat -nl | grep 21</span><br><span class="line">$ lsmod | grep ip_conntrack_ftp</span><br><span class="line">$ lsmod | grep nf_conntrack_ftp</span><br></pre></td></tr></table></figure>
<p>if not exist <code>ip_conntrack_ftp</code> or <code>nf_conntrack_ftp</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ modprobe ip_conntrack_ftp</span><br><span class="line">$ modprobe ip_nat_ftp</span><br></pre></td></tr></table></figure>
<p>then add them to <code>/etc/rc.local</code> to start them as ECS starts.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"modprobe ip_conntrack_ftp"</span>&gt;&gt;/etc/rc.local</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"modprobe ip_nat_ftp"</span>&gt;&gt;/etc/rc.local</span><br></pre></td></tr></table></figure>
<p>Stop firewall</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl stop firewalld.service</span><br><span class="line">$ service vsftpd restart</span><br></pre></td></tr></table></figure></div><!-- comment system--><div class="container"><hr></div></article><footer id="footer"><div class="container"><div class="bar"><div class="social"><a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div><div class="footer">© 2016 <a href="/" rel="nofollow">Ronghao's Blog</a>. Powered by <a rel="nofollow" target="_blank" href="https://hexo.io">Hexo</a>. Theme <a target="_blank" href="https://github.com/lotabout/very-simple">very-simple</a>.</div></div></div></footer><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});</script></body></html>